var jscolor={dir:"",bindClass:"color",binding:!0,preloading:!0,install:function(){jscolor.addEvent(window,"load",jscolor.init)},init:function(){jscolor.binding&&jscolor.bind(),jscolor.preloading&&jscolor.preload()},getDir:function(){if(!jscolor.dir){var e=jscolor.detectDir();jscolor.dir=e!==!1?e:"jscolor/"}return jscolor.dir},detectDir:function(){for(var e=location.href,t=document.getElementsByTagName("base"),i=0;i<t.length;i+=1)t[i].href&&(e=t[i].href);for(var t=document.getElementsByTagName("script"),i=0;i<t.length;i+=1)if(t[i].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(t[i].src)){var n=new jscolor.URI(t[i].src),o=n.toAbsolute(e);return o.path=o.path.replace(/[^\/]+$/,""),o.query=null,o.fragment=null,o.toString()}return!1},bind:function(){for(var e=new RegExp("(^|\\s)("+jscolor.bindClass+")\\s*(\\{[^}]*\\})?","i"),t=document.getElementsByTagName("input"),i=0;i<t.length;i+=1){var n;if(!t[i].color&&t[i].className&&(n=t[i].className.match(e))){var o={};if(n[3])try{o=new Function("return ("+n[3]+")")()}catch(a){}t[i].color=new jscolor.color(t[i],o)}}},preload:function(){for(var e in jscolor.imgRequire)jscolor.imgRequire.hasOwnProperty(e)&&jscolor.loadImage(e)},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(e){jscolor.imgRequire[e]=!0},loadImage:function(e){jscolor.imgLoaded[e]||(jscolor.imgLoaded[e]=new Image,jscolor.imgLoaded[e].src=jscolor.getDir()+e)},fetchElement:function(e){return"string"==typeof e?document.getElementById(e):e},addEvent:function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)},fireEvent:function(e,t){if(e)if(document.createEvent){var i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0),e.dispatchEvent(i)}else if(document.createEventObject){var i=document.createEventObject();e.fireEvent("on"+t,i)}else e["on"+t]&&e["on"+t]()},getElementPos:function(e){var t=e,i=e,n=0,o=0;if(t.offsetParent)do n+=t.offsetLeft,o+=t.offsetTop;while(t=t.offsetParent);for(;(i=i.parentNode)&&"BODY"!==i.nodeName.toUpperCase();)n-=i.scrollLeft,o-=i.scrollTop;return[n,o]},getElementSize:function(e){return[e.offsetWidth,e.offsetHeight]},getRelMousePos:function(e){var t=0,i=0;return e||(e=window.event),"number"==typeof e.offsetX?(t=e.offsetX,i=e.offsetY):"number"==typeof e.layerX&&(t=e.layerX,i=e.layerY),{x:t,y:i}},getViewPos:function(){return"number"==typeof window.pageYOffset?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0]},getViewSize:function(){return"number"==typeof window.innerWidth?[window.innerWidth,window.innerHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[0,0]},URI:function(e){function t(e){for(var t="";e;)if("../"===e.substr(0,3)||"./"===e.substr(0,2))e=e.replace(/^\.+/,"").substr(1);else if("/./"===e.substr(0,3)||"/."===e)e="/"+e.substr(3);else if("/../"===e.substr(0,4)||"/.."===e)e="/"+e.substr(4),t=t.replace(/\/?[^\/]*$/,"");else if("."===e||".."===e)e="";else{var i=e.match(/^\/?[^\/]*/)[0];e=e.substr(i.length),t+=i}return t}this.scheme=null,this.authority=null,this.path="",this.query=null,this.fragment=null,this.parse=function(e){var t=e.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);return this.scheme=t[3]?t[2]:null,this.authority=t[5]?t[6]:null,this.path=t[7],this.query=t[9]?t[10]:null,this.fragment=t[12]?t[13]:null,this},this.toString=function(){var e="";return null!==this.scheme&&(e=e+this.scheme+":"),null!==this.authority&&(e=e+"//"+this.authority),null!==this.path&&(e+=this.path),null!==this.query&&(e=e+"?"+this.query),null!==this.fragment&&(e=e+"#"+this.fragment),e},this.toAbsolute=function(e){var e=new jscolor.URI(e),i=this,n=new jscolor.URI;return null===e.scheme?!1:(null!==i.scheme&&i.scheme.toLowerCase()===e.scheme.toLowerCase()&&(i.scheme=null),null!==i.scheme?(n.scheme=i.scheme,n.authority=i.authority,n.path=t(i.path),n.query=i.query):(null!==i.authority?(n.authority=i.authority,n.path=t(i.path),n.query=i.query):(""===i.path?(n.path=e.path,n.query=null!==i.query?i.query:e.query):("/"===i.path.substr(0,1)?n.path=t(i.path):(n.path=null!==e.authority&&""===e.path?"/"+i.path:e.path.replace(/[^\/]+$/,"")+i.path,n.path=t(n.path)),n.query=i.query),n.authority=e.authority),n.scheme=e.scheme),n.fragment=i.fragment,n)},e&&this.parse(e)},color:function(e,t){function i(e,t,i){var n=Math.min(Math.min(e,t),i),o=Math.max(Math.max(e,t),i),a=o-n;if(0===a)return[null,0,o];var s=e===n?3+(i-t)/a:t===n?5+(e-i)/a:1+(t-e)/a;return[6===s?0:s,a/o,o]}function n(e,t,i){if(null===e)return[i,i,i];var n=Math.floor(e),o=n%2?e-n:1-(e-n),a=i*(1-t),s=i*(1-t*o);switch(n){case 6:case 0:return[i,s,a];case 1:return[s,i,a];case 2:return[a,i,s];case 3:return[a,s,i];case 4:return[s,a,i];case 5:return[i,a,s]}}function o(){delete jscolor.picker.owner,document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB)}function a(t,i){function n(){var e=m.pickerInsetColor.split(/\s+/),t=e.length<2?e[0]:e[1]+" "+e[0]+" "+e[0]+" "+e[1];d.btn.style.borderColor=t}if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(m.pickerCloseText)};for(var o=0,a=4;o<jscolor.images.sld[1];o+=a){var l=document.createElement("div");l.style.height=a+"px",l.style.fontSize="1px",l.style.lineHeight="0",jscolor.picker.sld.appendChild(l)}jscolor.picker.sldB.appendChild(jscolor.picker.sld),jscolor.picker.box.appendChild(jscolor.picker.sldB),jscolor.picker.box.appendChild(jscolor.picker.sldM),jscolor.picker.padB.appendChild(jscolor.picker.pad),jscolor.picker.box.appendChild(jscolor.picker.padB),jscolor.picker.box.appendChild(jscolor.picker.padM),jscolor.picker.btnS.appendChild(jscolor.picker.btnT),jscolor.picker.btn.appendChild(jscolor.picker.btnS),jscolor.picker.box.appendChild(jscolor.picker.btn),jscolor.picker.boxB.appendChild(jscolor.picker.box)}var d=jscolor.picker;if(d.box.onmouseup=d.box.onmouseout=function(){e.focus()},d.box.onmousedown=function(){v=!0},d.box.onmousemove=function(e){(w||k)&&(w&&f(e),k&&u(e),document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),p())},"ontouchstart"in window){var h=function(e){var t={offsetX:e.touches[0].pageX-C.X,offsetY:e.touches[0].pageY-C.Y};(w||k)&&(w&&f(t),k&&u(t),p()),e.stopPropagation(),e.preventDefault()};d.box.removeEventListener("touchmove",h,!1),d.box.addEventListener("touchmove",h,!1)}d.padM.onmouseup=d.padM.onmouseout=function(){w&&(w=!1,jscolor.fireEvent(b,"change"))},d.padM.onmousedown=function(e){switch(y){case 0:0===m.hsv[2]&&m.fromHSV(null,null,1);break;case 1:0===m.hsv[1]&&m.fromHSV(null,1,null)}k=!1,w=!0,f(e),p()},"ontouchstart"in window&&d.padM.addEventListener("touchstart",function(e){C={X:e.target.offsetParent.offsetLeft,Y:e.target.offsetParent.offsetTop},this.onmousedown({offsetX:e.touches[0].pageX-C.X,offsetY:e.touches[0].pageY-C.Y})}),d.sldM.onmouseup=d.sldM.onmouseout=function(){k&&(k=!1,jscolor.fireEvent(b,"change"))},d.sldM.onmousedown=function(e){w=!1,k=!0,u(e),p()},"ontouchstart"in window&&d.sldM.addEventListener("touchstart",function(e){C={X:e.target.offsetParent.offsetLeft,Y:e.target.offsetParent.offsetTop},this.onmousedown({offsetX:e.touches[0].pageX-C.X,offsetY:e.touches[0].pageY-C.Y})});var g=s(m);d.box.style.width=g[0]+"px",d.box.style.height=g[1]+"px",d.boxB.style.position="absolute",d.boxB.style.clear="both",d.boxB.style.left=t+"px",d.boxB.style.top=i+"px",d.boxB.style.zIndex=m.pickerZIndex,d.boxB.style.border=m.pickerBorder+"px solid",d.boxB.style.borderColor=m.pickerBorderColor,d.boxB.style.background=m.pickerFaceColor,d.pad.style.width=jscolor.images.pad[0]+"px",d.pad.style.height=jscolor.images.pad[1]+"px",d.padB.style.position="absolute",d.padB.style.left=m.pickerFace+"px",d.padB.style.top=m.pickerFace+"px",d.padB.style.border=m.pickerInset+"px solid",d.padB.style.borderColor=m.pickerInsetColor,d.padM.style.position="absolute",d.padM.style.left="0",d.padM.style.top="0",d.padM.style.width=m.pickerFace+2*m.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px",d.padM.style.height=d.box.style.height,d.padM.style.cursor="crosshair",d.sld.style.overflow="hidden",d.sld.style.width=jscolor.images.sld[0]+"px",d.sld.style.height=jscolor.images.sld[1]+"px",d.sldB.style.display=m.slider?"block":"none",d.sldB.style.position="absolute",d.sldB.style.right=m.pickerFace+"px",d.sldB.style.top=m.pickerFace+"px",d.sldB.style.border=m.pickerInset+"px solid",d.sldB.style.borderColor=m.pickerInsetColor,d.sldM.style.display=m.slider?"block":"none",d.sldM.style.position="absolute",d.sldM.style.right="0",d.sldM.style.top="0",d.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+m.pickerFace+2*m.pickerInset+"px",d.sldM.style.height=d.box.style.height;try{d.sldM.style.cursor="pointer"}catch(x){d.sldM.style.cursor="hand"}d.btn.style.display=m.pickerClosable?"block":"none",d.btn.style.position="absolute",d.btn.style.left=m.pickerFace+"px",d.btn.style.bottom=m.pickerFace+"px",d.btn.style.padding="0 15px",d.btn.style.height="18px",d.btn.style.border=m.pickerInset+"px solid",n(),d.btn.style.color=m.pickerButtonColor,d.btn.style.font="12px sans-serif",d.btn.style.textAlign="center";try{d.btn.style.cursor="pointer"}catch(x){d.btn.style.cursor="hand"}switch(d.btn.onmousedown=function(){m.hidePicker()},d.btnS.style.lineHeight=d.btn.style.height,y){case 0:var j="hs.png";break;case 1:var j="hv.png"}d.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')",d.padM.style.backgroundRepeat="no-repeat",d.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')",d.sldM.style.backgroundRepeat="no-repeat",d.pad.style.backgroundImage="url('"+jscolor.getDir()+j+"')",d.pad.style.backgroundRepeat="no-repeat",d.pad.style.backgroundPosition="0 0",r(),c(),jscolor.picker.owner=m,document.getElementsByTagName("body")[0].appendChild(d.boxB)}function s(e){var t=[2*e.pickerInset+2*e.pickerFace+jscolor.images.pad[0]+(e.slider?2*e.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),e.pickerClosable?4*e.pickerInset+3*e.pickerFace+jscolor.images.pad[1]+e.pickerButtonHeight:2*e.pickerInset+2*e.pickerFace+jscolor.images.pad[1]];return t}function r(){switch(y){case 0:var e=1;break;case 1:var e=2}var t=Math.round(m.hsv[0]/6*(jscolor.images.pad[0]-1)),i=Math.round((1-m.hsv[e])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=m.pickerFace+m.pickerInset+t-Math.floor(jscolor.images.cross[0]/2)+"px "+(m.pickerFace+m.pickerInset+i-Math.floor(jscolor.images.cross[1]/2))+"px";var o=jscolor.picker.sld.childNodes;switch(y){case 0:for(var a=n(m.hsv[0],m.hsv[1],1),s=0;s<o.length;s+=1)o[s].style.backgroundColor="rgb("+100*a[0]*(1-s/o.length)+"%,"+100*a[1]*(1-s/o.length)+"%,"+100*a[2]*(1-s/o.length)+"%)";break;case 1:var a,r,c=[m.hsv[2],0,0],s=Math.floor(m.hsv[0]),l=s%2?m.hsv[0]-s:1-(m.hsv[0]-s);switch(s){case 6:case 0:a=[0,1,2];break;case 1:a=[1,0,2];break;case 2:a=[2,0,1];break;case 3:a=[2,1,0];break;case 4:a=[1,2,0];break;case 5:a=[0,2,1]}for(var s=0;s<o.length;s+=1)r=1-1/(o.length-1)*s,c[1]=c[0]*(1-r*l),c[2]=c[0]*(1-r),o[s].style.backgroundColor="rgb("+100*c[a[0]]+"%,"+100*c[a[1]]+"%,"+100*c[a[2]]+"%)"}}function c(){switch(y){case 0:var e=2;break;case 1:var e=1}var t=Math.round((1-m.hsv[e])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(m.pickerFace+m.pickerInset+t-Math.floor(jscolor.images.arrow[1]/2))+"px"}function l(){return jscolor.picker&&jscolor.picker.owner===m}function d(){b===e&&m.importColor(),m.pickerOnfocus&&m.hidePicker()}function h(){b!==e&&m.importColor()}function f(e){var t=jscolor.getRelMousePos(e),i=t.x-m.pickerFace-m.pickerInset,n=t.y-m.pickerFace-m.pickerInset;switch(y){case 0:m.fromHSV(i*(6/(jscolor.images.pad[0]-1)),1-n/(jscolor.images.pad[1]-1),null,T);break;case 1:m.fromHSV(i*(6/(jscolor.images.pad[0]-1)),null,1-n/(jscolor.images.pad[1]-1),T)}}function u(e){var t=jscolor.getRelMousePos(e),i=t.y-m.pickerFace-m.pickerInset;switch(y){case 0:m.fromHSV(null,null,1-i/(jscolor.images.sld[1]-1),M);break;case 1:m.fromHSV(null,1-i/(jscolor.images.sld[1]-1),null,M)}}function p(){if(m.onImmediateChange){var e;e="string"==typeof m.onImmediateChange?new Function(m.onImmediateChange):m.onImmediateChange,e.call(m)}}this.required=!0,this.adjust=!0,this.hash=!1,this.caps=!0,this.slider=!0,this.valueElement=e,this.styleElement=e,this.onImmediateChange=null,this.hsv=[0,0,1],this.rgb=[1,1,1],this.minH=0,this.maxH=6,this.minS=0,this.maxS=1,this.minV=0,this.maxV=1,this.pickerOnfocus=!0,this.pickerMode="HSV",this.pickerPosition="bottom",this.pickerSmartPosition=!0,this.pickerButtonHeight=20,this.pickerClosable=!1,this.pickerCloseText="Close",this.pickerButtonColor="ButtonText",this.pickerFace=10,this.pickerFaceColor="ThreeDFace",this.pickerBorder=1,this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight",this.pickerInset=1,this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",this.pickerZIndex=1e4;for(var g in t)t.hasOwnProperty(g)&&(this[g]=t[g]);this.hidePicker=function(){l()&&o()},this.showPicker=function(){if(!l()){var t,i,n,o=jscolor.getElementPos(e),r=jscolor.getElementSize(e),c=jscolor.getViewPos(),d=jscolor.getViewSize(),h=s(this);switch(this.pickerPosition.toLowerCase()){case"left":t=1,i=0,n=-1;break;case"right":t=1,i=0,n=1;break;case"top":t=0,i=1,n=-1;break;default:t=0,i=1,n=1}var f=(r[i]+h[i])/2;if(this.pickerSmartPosition)var u=[-c[t]+o[t]+h[t]>d[t]?-c[t]+o[t]+r[t]/2>d[t]/2&&o[t]+r[t]-h[t]>=0?o[t]+r[t]-h[t]:o[t]:o[t],-c[i]+o[i]+r[i]+h[i]-f+f*n>d[i]?-c[i]+o[i]+r[i]/2>d[i]/2&&o[i]+r[i]-f-f*n>=0?o[i]+r[i]-f-f*n:o[i]+r[i]-f+f*n:o[i]+r[i]-f+f*n>=0?o[i]+r[i]-f+f*n:o[i]+r[i]-f-f*n];else var u=[o[t],o[i]+r[i]-f+f*n];a(u[t],u[i])}},this.importColor=function(){b?this.adjust?!this.required&&/^\s*$/.test(b.value)?(b.value="",x.style.backgroundImage=x.jscStyle.backgroundImage,x.style.backgroundColor=x.jscStyle.backgroundColor,x.style.color=x.jscStyle.color,this.exportColor(j|I)):this.fromString(b.value)||this.exportColor():this.fromString(b.value,j)||(x.style.backgroundImage=x.jscStyle.backgroundImage,x.style.backgroundColor=x.jscStyle.backgroundColor,x.style.color=x.jscStyle.color,this.exportColor(j|I)):this.exportColor()},this.exportColor=function(e){if(!(e&j)&&b){var t=this.toString();this.caps&&(t=t.toUpperCase()),this.hash&&(t="#"+t),b.value=t}e&I||!x||(x.style.backgroundImage="none",x.style.backgroundColor="#"+this.toString(),x.style.color=.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]<.5?"#FFF":"#000"),e&M||!l()||r(),e&T||!l()||c()},this.fromHSV=function(e,t,i,o){null!==e&&(e=Math.max(0,this.minH,Math.min(6,this.maxH,e))),null!==t&&(t=Math.max(0,this.minS,Math.min(1,this.maxS,t))),null!==i&&(i=Math.max(0,this.minV,Math.min(1,this.maxV,i))),this.rgb=n(null===e?this.hsv[0]:this.hsv[0]=e,null===t?this.hsv[1]:this.hsv[1]=t,null===i?this.hsv[2]:this.hsv[2]=i),this.exportColor(o)},this.fromRGB=function(e,t,o,a){null!==e&&(e=Math.max(0,Math.min(1,e))),null!==t&&(t=Math.max(0,Math.min(1,t))),null!==o&&(o=Math.max(0,Math.min(1,o)));var s=i(null===e?this.rgb[0]:e,null===t?this.rgb[1]:t,null===o?this.rgb[2]:o);null!==s[0]&&(this.hsv[0]=Math.max(0,this.minH,Math.min(6,this.maxH,s[0]))),0!==s[2]&&(this.hsv[1]=null===s[1]?null:Math.max(0,this.minS,Math.min(1,this.maxS,s[1]))),this.hsv[2]=null===s[2]?null:Math.max(0,this.minV,Math.min(1,this.maxV,s[2]));var r=n(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=r[0],this.rgb[1]=r[1],this.rgb[2]=r[2],this.exportColor(a)},this.fromString=function(e,t){var i=e.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);return i?(6===i[1].length?this.fromRGB(parseInt(i[1].substr(0,2),16)/255,parseInt(i[1].substr(2,2),16)/255,parseInt(i[1].substr(4,2),16)/255,t):this.fromRGB(parseInt(i[1].charAt(0)+i[1].charAt(0),16)/255,parseInt(i[1].charAt(1)+i[1].charAt(1),16)/255,parseInt(i[1].charAt(2)+i[1].charAt(2),16)/255,t),!0):!1},this.toString=function(){return(256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1)};var m=this,y="hvs"===this.pickerMode.toLowerCase()?1:0,v=!1,b=jscolor.fetchElement(this.valueElement),x=jscolor.fetchElement(this.styleElement),w=!1,k=!1,C={},j=1,I=2,M=4,T=8;if(jscolor.addEvent(e,"focus",function(){m.pickerOnfocus&&m.showPicker()}),jscolor.addEvent(e,"blur",function(){v?v=!1:window.setTimeout(function(){v||d(),v=!1},0)}),b){var S=function(){m.fromString(b.value,j),p()};jscolor.addEvent(b,"keyup",S),jscolor.addEvent(b,"input",S),jscolor.addEvent(b,"blur",h),b.setAttribute("autocomplete","off")}switch(x&&(x.jscStyle={backgroundImage:x.style.backgroundImage,backgroundColor:x.style.backgroundColor,color:x.style.color}),y){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png")}jscolor.requireImage("cross.gif"),jscolor.requireImage("arrow.gif"),this.importColor()}};jscolor.install();